(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{127:function(e,t,c){},128:function(e,t,c){},129:function(e,t,c){},130:function(e,t,c){},131:function(e,t,c){},132:function(e,t,c){},133:function(e,t,c){},134:function(e,t,c){},135:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c(15),a=c.n(n),s=c(11),i=c(6),l=function(e){var t=localStorage.getItem(e);return null!==t&&JSON.parse(t)},o=function(e,t){localStorage.setItem(e,JSON.stringify(t))},j=c(1),u=Object(r.createContext)({user:null,setUser:function(){return null}}),b=function(e){var t=e.children,c=Object(r.useState)((function(){return l("activeUser")||null})),n=Object(i.a)(c,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){o("activeUser",a)}),[a]),Object(j.jsx)(u.Provider,{value:{user:a,setUser:s},children:t})},d=c(4),m=c(45),O=c.n(m),h=(c(53),function(e){var t=e.to,c=e.title;return Object(j.jsx)(s.b,{className:function(e){var t=e.isActive;return O()("nav-link",{isActive:t})},to:t,children:c})}),f=(c(55),function(){var e=Object(r.useContext)(u),t=e.user,c=e.setUser;return console.log("user===>",t),Object(j.jsxs)("div",{className:"auth-nav",children:[!t&&Object(j.jsx)(h,{to:"/login",title:"Login"}),!t&&Object(j.jsx)(h,{to:"/register",title:"Register"}),t&&"Hi, ".concat(t.username),t&&Object(j.jsx)("button",{className:"logout-btn",type:"button",onClick:function(){return localStorage.removeItem("activeUser"),void c(null)},children:"Logout"})]})}),x=(c(56),function(e){var t=e.children;return Object(j.jsx)("div",{className:"container",children:t})}),p=(c(57),function(){var e=Object(s.c)(),t=Object(i.a)(e,2),c=t[0],r=t[1];return Object(j.jsx)("div",{children:Object(j.jsx)("input",{className:"search-query",placeholder:"Search...",type:"search",onChange:function(e){var t=e.target.value;t?c.set("query",t):c.delete("query"),r(c)}})})}),v=(c(58),function(){return Object(j.jsxs)("div",{className:"user-nav",children:[Object(j.jsx)(h,{to:"/",title:"Home"}),Object(j.jsx)(h,{to:"/gallery",title:"Gallery"}),Object(j.jsx)(h,{to:"/favorite",title:"Favorite"})]})}),g=(c(59),function(){var e=Object(r.useContext)(u).user,t="/gallery"===Object(d.m)().pathname;return Object(j.jsx)("header",{className:"header",children:Object(j.jsx)(x,{children:Object(j.jsxs)("div",{className:"header__content",children:[e&&Object(j.jsx)(v,{}),!e&&Object(j.jsx)("div",{}),t&&Object(j.jsx)(p,{}),Object(j.jsx)(f,{})]})})})}),_=(c(60),function(){return Object(j.jsx)("div",{className:"home",children:Object(j.jsx)(x,{children:Object(j.jsx)("h1",{children:"HomePage"})})})}),N=c(3),y=c(7),w=c(27),S=(c(61),function(){var e=Object(d.o)(),t=Object(w.a)(),c=t.register,r=t.handleSubmit,n=t.formState.errors;return Object(j.jsx)("div",{className:"register",children:Object(j.jsxs)(x,{children:[Object(j.jsx)("h1",{className:"register__title",children:"Registration"}),Object(j.jsxs)("form",{onSubmit:r((function(t){var c=l("users");if(!c)return o("users",[t]),void e("/login");c.find((function(e){return e.email===t.email||e.username===t.username}))?alert("User with Username: '".concat(t.username,"' or Email: '").concat(t.email,"' already exists...")):(o("users",[].concat(Object(y.a)(c),[t])),e("/login"))})),className:"form",children:[Object(j.jsxs)("label",{htmlFor:"username",className:"form__label",children:[Object(j.jsx)("span",{className:"form__label-text",children:"Username"}),Object(j.jsx)("input",Object(N.a)({className:"form__label-input",placeholder:"Username..."},c("username",{required:!0}))),n.username&&Object(j.jsx)("span",{className:"form__label-error-text",children:"This field is required"})]}),Object(j.jsxs)("label",{htmlFor:"email",className:"form__label",children:[Object(j.jsx)("span",{className:"form__label-text",children:"Email"}),Object(j.jsx)("input",Object(N.a)({className:"form__label-input",placeholder:"Email...",type:"email"},c("email",{required:!0}))),n.email&&Object(j.jsx)("span",{className:"form__label-error-text",children:"This field is required"})]}),Object(j.jsxs)("label",{htmlFor:"password",className:"form__label",children:[Object(j.jsx)("span",{className:"form__label-text",children:"Password"}),Object(j.jsx)("input",Object(N.a)({className:"form__label-input",placeholder:"Password..."},c("password",{required:!0}))),n.password&&Object(j.jsx)("span",{className:"form__label-error-text",children:"This field is required"})]}),Object(j.jsx)("input",{className:"form__submit-btn",type:"submit",value:"Register"})]})]})})}),k=(c(62),function(){var e=Object(d.o)(),t=Object(r.useContext)(u).setUser,c=Object(w.a)(),n=c.register,a=c.handleSubmit,s=c.formState.errors;return Object(j.jsx)("div",{className:"login",children:Object(j.jsxs)(x,{children:[Object(j.jsx)("h1",{className:"login__title",children:"Login"}),Object(j.jsxs)("form",{onSubmit:a((function(c){console.log(c);var r=l("users").find((function(e){return e.email===c.email}));r?r.password===c.password?(t(r),e("/home")):alert("Password is incorrect"):alert("User not found")})),className:"form",children:[Object(j.jsxs)("label",{htmlFor:"email",className:"form__label",children:[Object(j.jsx)("span",{className:"form__label-text",children:"Email"}),Object(j.jsx)("input",Object(N.a)({className:"form__label-input",placeholder:"Email...",type:"email"},n("email",{required:!0}))),s.email&&Object(j.jsx)("span",{className:"form__label-error-text",children:"This field is required"})]}),Object(j.jsxs)("label",{htmlFor:"password",className:"form__label",children:[Object(j.jsx)("span",{className:"form__label-text",children:"Password"}),Object(j.jsx)("input",Object(N.a)({className:"form__label-input",placeholder:"Password..."},n("password",{required:!0}))),s.password&&Object(j.jsx)("span",{className:"form__label-error-text",children:"This field is required"})]}),Object(j.jsx)("input",{className:"form__submit-btn",type:"submit",value:"Login"})]})]})})}),q=c(5),E=c.n(q),U=c(8),C=c(46),F="LBtf2MtXOG5-xdkn9xpAsUv5ht1pzKSMyTNkz8LubOw",L="https://api.unsplash.com",I=function(){var e=Object(U.a)(E.a.mark((function e(){var t,c,r,n,a,s=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,c=s.length>1&&void 0!==s[1]?s[1]:"",r="".concat(L,"/").concat(c&&"search/","photos/?client_id=").concat(F,"&page=").concat(t,"&per_page=15").concat(c&&"&query=".concat(c)),e.next=5,fetch(r);case 5:return n=e.sent,e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",a.map((function(e){return{id:e.id,alt_description:e.alt_description,created_at:e.created_at,description:e.description,urls:{regular:e.urls.regular,thumb:e.urls.thumb}}})));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=c(47),T=c.n(P),H=(c(127),function(e){var t=e.photo,c=e.handleImage,r=e.handleFavorite,n=t.urls,a=t.description;return Object(j.jsxs)("div",{className:"gallery-card-wrapper",children:[Object(j.jsx)("button",{type:"button",className:"gallery-card",onClick:function(){return c(t)},children:Object(j.jsx)("img",{className:"gallery-image",src:n.regular,alt:a})}),Object(j.jsx)("button",{className:"favorite-btn",type:"button",onClick:function(){return r(t)},children:"\ud83e\udd0d"})]})}),J=(c(128),function(e){var t=e.onClose,c=e.modalImage;return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]),a.a.createPortal(Object(j.jsx)("div",{className:"overlay",onClick:function(e){e.target===e.currentTarget&&t()},children:Object(j.jsxs)("div",{className:"popup",children:[Object(j.jsx)("img",{style:{width:"100%",height:"100%"},src:null===c||void 0===c?void 0:c.urls.regular,alt:"#"}),Object(j.jsxs)("div",{className:"image-info",children:[Object(j.jsx)("p",{children:null===c||void 0===c?void 0:c.description}),Object(j.jsx)("p",{children:null===c||void 0===c?void 0:c.created_at})]})]})}),document.querySelector("#modal-root"))}),A=(c(129),function(e){var t=e.photos,c=Object(r.useState)(!1),n=Object(i.a)(c,2),a=n[0],s=n[1],u=Object(r.useState)(null),b=Object(i.a)(u,2),d=b[0],m=b[1],O=l("activeUser").email,h=Object(r.useState)(l("".concat(O))||[]),f=Object(i.a)(h,2),x=f[0],p=f[1],v=function(e){s(!0),m(e)},g=function(e){var t=x.find((function(t){return t.id===e.id}));0===x.length&&p([].concat(Object(y.a)(x),[e])),t?alert("Image exist in favorite list"):p([].concat(Object(y.a)(x),[e]))};return Object(r.useEffect)((function(){o("".concat(O),x)}),[x]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T.a,{duration:0,columnWidth:200,gutterWidth:10,gutterHeight:10,component:"div",children:t.map((function(e){return Object(j.jsx)(H,{photo:e,handleImage:v,handleFavorite:g},e.id)}))}),a&&Object(j.jsx)(J,{onClose:function(){s(!1)},modalImage:d})]})}),M=(c(130),function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(1),l=Object(i.a)(a,2),o=l[0],u=l[1],b=Object(r.useState)(!1),d=Object(i.a)(b,2),m=d[0],O=d[1],h=Object(r.useState)(""),f=Object(i.a)(h,2),p=f[0],v=f[1],g=Object(s.c)(),_=Object(i.a)(g,1)[0].get("query")||"",N=function(){var e=Object(U.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,I(o,p);case 4:if(0!==(t=e.sent).length){e.next=8;break}return O(!1),e.abrupt("return");case 8:n((function(e){return[].concat(Object(y.a)(e),Object(y.a)(t))})),u((function(e){return e+1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){N()}),[]),Object(r.useEffect)((function(){N()}),[p]),Object(r.useEffect)((function(){var e=setTimeout((function(){v(_),u(1)}),500);return function(){return clearTimeout(e)}}),[_,500]),Object(j.jsx)("div",{className:"gallery",children:Object(j.jsx)(x,{children:Object(j.jsx)(C.a,{style:{overflow:"hidden"},dataLength:c.length,next:N,hasMore:m,loader:Object(j.jsx)("h4",{children:"Loading..."}),children:Object(j.jsx)(A,{photos:c})})})})}),R=(c(131),function(){var e=l("activeUser").email,t=l("".concat(e));return Object(j.jsx)("div",{className:"favorite",children:Object(j.jsx)(x,{children:Object(j.jsx)(A,{photos:t})})})}),z=(c(132),function(){return Object(j.jsx)("div",{className:"not-found",children:Object(j.jsx)(x,{children:Object(j.jsx)("h1",{children:"NotFoundPage"})})})}),B=(c(133),function(e){var t=e.children;return Object(r.useContext)(u).user?t:Object(j.jsx)(d.a,{to:"/register"})}),G=function(){return Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)(g,{}),Object(j.jsx)("main",{className:"main",children:Object(j.jsxs)(d.d,{children:[Object(j.jsx)(d.b,{path:"/",element:Object(j.jsx)(B,{children:Object(j.jsx)(_,{})})}),Object(j.jsx)(d.b,{path:"/home",element:Object(j.jsx)(d.a,{to:"/",replace:!0})}),Object(j.jsx)(d.b,{path:"/register",element:Object(j.jsx)(S,{})}),Object(j.jsx)(d.b,{path:"/login",element:Object(j.jsx)(k,{})}),Object(j.jsx)(d.b,{path:"/gallery",element:Object(j.jsx)(B,{children:Object(j.jsx)(M,{})})}),Object(j.jsx)(d.b,{path:"/favorite",element:Object(j.jsx)(B,{children:Object(j.jsx)(R,{})})}),Object(j.jsx)(d.b,{path:"*",element:Object(j.jsx)(z,{})})]})})]})};c(134);a.a.render(Object(j.jsx)(s.a,{children:Object(j.jsx)(b,{children:Object(j.jsx)(G,{})})}),document.getElementById("root"))},53:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){}},[[135,1,2]]]);
//# sourceMappingURL=main.2088a56a.chunk.js.map